var Hr=Object.defineProperty;var wt=e=>{throw TypeError(e)};var Xr=(e,t,r)=>t in e?Hr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var g=(e,t,r)=>Xr(e,typeof t!="symbol"?t+"":t,r),st=(e,t,r)=>t.has(e)||wt("Cannot "+r);var u=(e,t,r)=>(st(e,t,"read from private field"),r?r.call(e):t.get(e)),N=(e,t,r)=>t.has(e)?wt("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),x=(e,t,r,s)=>(st(e,t,"write to private field"),s?s.call(e,r):t.set(e,r),r),b=(e,t,r)=>(st(e,t,"access private method"),r);var _t=(e,t,r,s)=>({set _(n){x(e,t,n,r)},get _(){return u(e,t,s)}});var rr={Stringify:1},j=(e,t)=>{const r=new String(e);return r.isEscaped=!0,r.callbacks=t,r},Gr=/[&<>'"]/,sr=async(e,t)=>{let r="";t||(t=[]);const s=await Promise.all(e);for(let n=s.length-1;r+=s[n],n--,!(n<0);n--){let a=s[n];typeof a=="object"&&t.push(...a.callbacks||[]);const i=a.isEscaped;if(a=await(typeof a=="object"?a.toString():a),typeof a=="object"&&t.push(...a.callbacks||[]),a.isEscaped??i)r+=a;else{const o=[r];te(a,o),r=o[0]}}return j(r,t)},te=(e,t)=>{const r=e.search(Gr);if(r===-1){t[0]+=e;return}let s,n,a=0;for(n=r;n<e.length;n++){switch(e.charCodeAt(n)){case 34:s="&quot;";break;case 39:s="&#39;";break;case 38:s="&amp;";break;case 60:s="&lt;";break;case 62:s="&gt;";break;default:continue}t[0]+=e.substring(a,n)+s,a=n+1}t[0]+=e.substring(a,n)},nr=e=>{const t=e.callbacks;if(!(t!=null&&t.length))return e;const r=[e],s={};return t.forEach(n=>n({phase:rr.Stringify,buffer:r,context:s})),r[0]},ar=async(e,t,r,s,n)=>{typeof e=="object"&&!(e instanceof String)&&(e instanceof Promise||(e=e.toString()),e instanceof Promise&&(e=await e));const a=e.callbacks;return a!=null&&a.length?(n?n[0]+=e:n=[e],Promise.all(a.map(o=>o({phase:t,buffer:n,context:s}))).then(o=>Promise.all(o.filter(Boolean).map(c=>ar(c,t,!1,s,n))).then(()=>n[0]))):Promise.resolve(e)},qr=(e,...t)=>{const r=[""];for(let s=0,n=e.length-1;s<n;s++){r[0]+=e[s];const a=Array.isArray(t[s])?t[s].flat(1/0):[t[s]];for(let i=0,o=a.length;i<o;i++){const c=a[i];if(typeof c=="string")te(c,r);else if(typeof c=="number")r[0]+=c;else{if(typeof c=="boolean"||c===null||c===void 0)continue;if(typeof c=="object"&&c.isEscaped)if(c.callbacks)r.unshift("",c);else{const d=c.toString();d instanceof Promise?r.unshift("",d):r[0]+=d}else c instanceof Promise?r.unshift("",c):te(c.toString(),r)}}}return r[0]+=e.at(-1),r.length===1?"callbacks"in r?j(nr(j(r[0],r.callbacks))):j(r[0]):sr(r,r.callbacks)},yt=Symbol("RENDERER"),ht=Symbol("ERROR_HANDLER"),_=Symbol("STASH"),ir=Symbol("INTERNAL"),zr=Symbol("MEMO"),Ze=Symbol("PERMALINK"),Ot=e=>(e[ir]=!0,e),or=e=>({value:t,children:r})=>{if(!r)return;const s={children:[{tag:Ot(()=>{e.push(t)}),props:{}}]};Array.isArray(r)?s.children.push(...r.flat()):s.children.push(r),s.children.push({tag:Ot(()=>{e.pop()}),props:{}});const n={tag:"",props:s,type:""};return n[ht]=a=>{throw e.pop(),a},n},cr=e=>{const t=[e],r=or(t);return r.values=t,r.Provider=r,Te.push(r),r},Te=[],xt=e=>{const t=[e],r=s=>{t.push(s.value);let n;try{n=s.children?(Array.isArray(s.children)?new fr("",{},s.children):s.children).toString():""}finally{t.pop()}return n instanceof Promise?n.then(a=>j(a,a.callbacks)):j(n)};return r.values=t,r.Provider=r,r[yt]=or(t),Te.push(r),r},Ae=e=>e.values.at(-1),Ge={title:[],script:["src"],style:["data-href"],link:["href"],meta:["name","httpEquiv","charset","itemProp"]},mt={},qe="data-precedence",ke=e=>Array.isArray(e)?e:[e],St=new WeakMap,Lt=(e,t,r,s)=>({buffer:n,context:a})=>{if(!n)return;const i=St.get(a)||{};St.set(a,i);const o=i[e]||(i[e]=[]);let c=!1;const d=Ge[e];if(d.length>0){e:for(const[,f]of o)for(const h of d)if(((f==null?void 0:f[h])??null)===(r==null?void 0:r[h])){c=!0;break e}}if(c?n[0]=n[0].replaceAll(t,""):d.length>0?o.push([t,r,s]):o.unshift([t,r,s]),n[0].indexOf("</head>")!==-1){let f;if(s===void 0)f=o.map(([h])=>h);else{const h=[];f=o.map(([m,,E])=>{let y=h.indexOf(E);return y===-1&&(h.push(E),y=h.length-1),[m,y]}).sort((m,E)=>m[1]-E[1]).map(([m])=>m)}f.forEach(h=>{n[0]=n[0].replaceAll(h,"")}),n[0]=n[0].replace(/(?=<\/head>)/,f.join(""))}},$e=(e,t,r)=>j(new F(e,r,ke(t??[])).toString()),Fe=(e,t,r,s)=>{if("itemProp"in r)return $e(e,t,r);let{precedence:n,blocking:a,...i}=r;n=s?n??"":void 0,s&&(i[qe]=n);const o=new F(e,i,ke(t||[])).toString();return o instanceof Promise?o.then(c=>j(o,[...c.callbacks||[],Lt(e,c,i,n)])):j(o,[Lt(e,o,i,n)])},Kr=({children:e,...t})=>{const r=Tt();if(r){const s=Ae(r);if(s==="svg"||s==="head")return new F("title",t,ke(e??[]))}return Fe("title",e,t,!1)},Vr=({children:e,...t})=>{const r=Tt();return["src","async"].some(s=>!t[s])||r&&Ae(r)==="head"?$e("script",e,t):Fe("script",e,t,!1)},Wr=({children:e,...t})=>["href","precedence"].every(r=>r in t)?(t["data-href"]=t.href,delete t.href,Fe("style",e,t,!0)):$e("style",e,t),Yr=({children:e,...t})=>["onLoad","onError"].some(r=>r in t)||t.rel==="stylesheet"&&(!("precedence"in t)||"disabled"in t)?$e("link",e,t):Fe("link",e,t,"precedence"in t),Jr=({children:e,...t})=>{const r=Tt();return r&&Ae(r)==="head"?$e("meta",e,t):Fe("meta",e,t,!1)},lr=(e,{children:t,...r})=>new F(e,r,ke(t??[])),Zr=e=>(typeof e.action=="function"&&(e.action=Ze in e.action?e.action[Ze]:void 0),lr("form",e)),dr=(e,t)=>(typeof t.formAction=="function"&&(t.formAction=Ze in t.formAction?t.formAction[Ze]:void 0),lr(e,t)),Qr=e=>dr("input",e),es=e=>dr("button",e);const nt=Object.freeze(Object.defineProperty({__proto__:null,button:es,form:Zr,input:Qr,link:Yr,meta:Jr,script:Vr,style:Wr,title:Kr},Symbol.toStringTag,{value:"Module"}));var ts=new Map([["className","class"],["htmlFor","for"],["crossOrigin","crossorigin"],["httpEquiv","http-equiv"],["itemProp","itemprop"],["fetchPriority","fetchpriority"],["noModule","nomodule"],["formAction","formaction"]]),Qe=e=>ts.get(e)||e,ur=(e,t)=>{for(const[r,s]of Object.entries(e)){const n=r[0]==="-"||!/[A-Z]/.test(r)?r:r.replace(/[A-Z]/g,a=>`-${a.toLowerCase()}`);t(n,s==null?null:typeof s=="number"?n.match(/^(?:a|border-im|column(?:-c|s)|flex(?:$|-[^b])|grid-(?:ar|[^a])|font-w|li|or|sca|st|ta|wido|z)|ty$/)?`${s}`:`${s}px`:s)}},Se=void 0,Tt=()=>Se,rs=e=>/[A-Z]/.test(e)&&e.match(/^(?:al|basel|clip(?:Path|Rule)$|co|do|fill|fl|fo|gl|let|lig|i|marker[EMS]|o|pai|pointe|sh|st[or]|text[^L]|tr|u|ve|w)/)?e.replace(/([A-Z])/g,"-$1").toLowerCase():e,ss=["area","base","br","col","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"],ns=["allowfullscreen","async","autofocus","autoplay","checked","controls","default","defer","disabled","download","formnovalidate","hidden","inert","ismap","itemscope","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"],Nt=(e,t)=>{for(let r=0,s=e.length;r<s;r++){const n=e[r];if(typeof n=="string")te(n,t);else{if(typeof n=="boolean"||n===null||n===void 0)continue;n instanceof F?n.toStringToBuffer(t):typeof n=="number"||n.isEscaped?t[0]+=n:n instanceof Promise?t.unshift("",n):Nt(n,t)}}},F=class{constructor(e,t,r){g(this,"tag");g(this,"props");g(this,"key");g(this,"children");g(this,"isEscaped",!0);g(this,"localContexts");this.tag=e,this.props=t,this.children=r}get type(){return this.tag}get ref(){return this.props.ref||null}toString(){var t,r;const e=[""];(t=this.localContexts)==null||t.forEach(([s,n])=>{s.values.push(n)});try{this.toStringToBuffer(e)}finally{(r=this.localContexts)==null||r.forEach(([s])=>{s.values.pop()})}return e.length===1?"callbacks"in e?nr(j(e[0],e.callbacks)).toString():e[0]:sr(e,e.callbacks)}toStringToBuffer(e){const t=this.tag,r=this.props;let{children:s}=this;e[0]+=`<${t}`;const n=Se&&Ae(Se)==="svg"?a=>rs(Qe(a)):a=>Qe(a);for(let[a,i]of Object.entries(r))if(a=n(a),a!=="children"){if(a==="style"&&typeof i=="object"){let o="";ur(i,(c,d)=>{d!=null&&(o+=`${o?";":""}${c}:${d}`)}),e[0]+=' style="',te(o,e),e[0]+='"'}else if(typeof i=="string")e[0]+=` ${a}="`,te(i,e),e[0]+='"';else if(i!=null)if(typeof i=="number"||i.isEscaped)e[0]+=` ${a}="${i}"`;else if(typeof i=="boolean"&&ns.includes(a))i&&(e[0]+=` ${a}=""`);else if(a==="dangerouslySetInnerHTML"){if(s.length>0)throw new Error("Can only set one of `children` or `props.dangerouslySetInnerHTML`.");s=[j(i.__html)]}else if(i instanceof Promise)e[0]+=` ${a}="`,e.unshift('"',i);else if(typeof i=="function"){if(!a.startsWith("on")&&a!=="ref")throw new Error(`Invalid prop '${a}' of type 'function' supplied to '${t}'.`)}else e[0]+=` ${a}="`,te(i.toString(),e),e[0]+='"'}if(ss.includes(t)&&s.length===0){e[0]+="/>";return}e[0]+=">",Nt(s,e),e[0]+=`</${t}>`}},at=class extends F{toStringToBuffer(e){const{children:t}=this,r=this.tag.call(null,{...this.props,children:t.length<=1?t[0]:t});if(!(typeof r=="boolean"||r==null))if(r instanceof Promise)if(Te.length===0)e.unshift("",r);else{const s=Te.map(n=>[n,n.values.at(-1)]);e.unshift("",r.then(n=>(n instanceof F&&(n.localContexts=s),n)))}else r instanceof F?r.toStringToBuffer(e):typeof r=="number"||r.isEscaped?(e[0]+=r,r.callbacks&&(e.callbacks||(e.callbacks=[]),e.callbacks.push(...r.callbacks))):te(r,e)}},fr=class extends F{toStringToBuffer(e){Nt(this.children,e)}},Ut=(e,t,...r)=>{t??(t={}),r.length&&(t.children=r.length===1?r[0]:r);const s=t.key;delete t.key;const n=ze(e,t,r);return n.key=s,n},Ct=!1,ze=(e,t,r)=>{if(!Ct){for(const s in mt)nt[s][yt]=mt[s];Ct=!0}return typeof e=="function"?new at(e,t,r):nt[e]?new at(nt[e],t,r):e==="svg"||e==="head"?(Se||(Se=xt("")),new F(e,t,[new at(Se,{value:e},r)])):new F(e,t,r)},as=({children:e})=>new fr("",{children:e},Array.isArray(e)?e:e?[e]:[]);function l(e,t,r){let s;if(!t||!("children"in t))s=ze(e,t,[]);else{const n=t.children;s=Array.isArray(n)?ze(e,t,n):ze(e,t,[n])}return s.key=r,s}var It=(e,t,r)=>(s,n)=>{let a=-1;return i(0);async function i(o){if(o<=a)throw new Error("next() called multiple times");a=o;let c,d=!1,f;if(e[o]?(f=e[o][0][0],s.req.routeIndex=o):f=o===e.length&&n||void 0,f)try{c=await f(s,()=>i(o+1))}catch(h){if(h instanceof Error&&t)s.error=h,c=await t(h,s),d=!0;else throw h}else s.finalized===!1&&r&&(c=await r(s));return c&&(s.finalized===!1||d)&&(s.res=c),s}},is=Symbol(),os=async(e,t=Object.create(null))=>{const{all:r=!1,dot:s=!1}=t,a=(e instanceof vr?e.raw.headers:e.headers).get("Content-Type");return a!=null&&a.startsWith("multipart/form-data")||a!=null&&a.startsWith("application/x-www-form-urlencoded")?cs(e,{all:r,dot:s}):{}};async function cs(e,t){const r=await e.formData();return r?ls(r,t):{}}function ls(e,t){const r=Object.create(null);return e.forEach((s,n)=>{t.all||n.endsWith("[]")?ds(r,n,s):r[n]=s}),t.dot&&Object.entries(r).forEach(([s,n])=>{s.includes(".")&&(us(r,s,n),delete r[s])}),r}var ds=(e,t,r)=>{e[t]!==void 0?Array.isArray(e[t])?e[t].push(r):e[t]=[e[t],r]:t.endsWith("[]")?e[t]=[r]:e[t]=r},us=(e,t,r)=>{let s=e;const n=t.split(".");n.forEach((a,i)=>{i===n.length-1?s[a]=r:((!s[a]||typeof s[a]!="object"||Array.isArray(s[a])||s[a]instanceof File)&&(s[a]=Object.create(null)),s=s[a])})},hr=e=>{const t=e.split("/");return t[0]===""&&t.shift(),t},fs=e=>{const{groups:t,path:r}=hs(e),s=hr(r);return ms(s,t)},hs=e=>{const t=[];return e=e.replace(/\{[^}]+\}/g,(r,s)=>{const n=`@${s}`;return t.push([n,r]),n}),{groups:t,path:e}},ms=(e,t)=>{for(let r=t.length-1;r>=0;r--){const[s]=t[r];for(let n=e.length-1;n>=0;n--)if(e[n].includes(s)){e[n]=e[n].replace(s,t[r][1]);break}}return e},He={},ps=(e,t)=>{if(e==="*")return"*";const r=e.match(/^\:([^\{\}]+)(?:\{(.+)\})?$/);if(r){const s=`${e}#${t}`;return He[s]||(r[2]?He[s]=t&&t[0]!==":"&&t[0]!=="*"?[s,r[1],new RegExp(`^${r[2]}(?=/${t})`)]:[e,r[1],new RegExp(`^${r[2]}$`)]:He[s]=[e,r[1],!0]),He[s]}return null},Rt=(e,t)=>{try{return t(e)}catch{return e.replace(/(?:%[0-9A-Fa-f]{2})+/g,r=>{try{return t(r)}catch{return r}})}},Es=e=>Rt(e,decodeURI),mr=e=>{const t=e.url,r=t.indexOf("/",t.indexOf(":")+4);let s=r;for(;s<t.length;s++){const n=t.charCodeAt(s);if(n===37){const a=t.indexOf("?",s),i=t.slice(r,a===-1?void 0:a);return Es(i.includes("%25")?i.replace(/%25/g,"%2525"):i)}else if(n===63)break}return t.slice(r,s)},gs=e=>{const t=mr(e);return t.length>1&&t.at(-1)==="/"?t.slice(0,-1):t},he=(e,t,...r)=>(r.length&&(t=he(t,...r)),`${(e==null?void 0:e[0])==="/"?"":"/"}${e}${t==="/"?"":`${(e==null?void 0:e.at(-1))==="/"?"":"/"}${(t==null?void 0:t[0])==="/"?t.slice(1):t}`}`),pr=e=>{if(e.charCodeAt(e.length-1)!==63||!e.includes(":"))return null;const t=e.split("/"),r=[];let s="";return t.forEach(n=>{if(n!==""&&!/\:/.test(n))s+="/"+n;else if(/\:/.test(n))if(/\?/.test(n)){r.length===0&&s===""?r.push("/"):r.push(s);const a=n.replace("?","");s+="/"+a,r.push(s)}else s+="/"+n}),r.filter((n,a,i)=>i.indexOf(n)===a)},it=e=>/[%+]/.test(e)?(e.indexOf("+")!==-1&&(e=e.replace(/\+/g," ")),e.indexOf("%")!==-1?Rt(e,gr):e):e,Er=(e,t,r)=>{let s;if(!r&&t&&!/[%+]/.test(t)){let i=e.indexOf(`?${t}`,8);for(i===-1&&(i=e.indexOf(`&${t}`,8));i!==-1;){const o=e.charCodeAt(i+t.length+1);if(o===61){const c=i+t.length+2,d=e.indexOf("&",c);return it(e.slice(c,d===-1?void 0:d))}else if(o==38||isNaN(o))return"";i=e.indexOf(`&${t}`,i+1)}if(s=/[%+]/.test(e),!s)return}const n={};s??(s=/[%+]/.test(e));let a=e.indexOf("?",8);for(;a!==-1;){const i=e.indexOf("&",a+1);let o=e.indexOf("=",a);o>i&&i!==-1&&(o=-1);let c=e.slice(a+1,o===-1?i===-1?void 0:i:o);if(s&&(c=it(c)),a=i,c==="")continue;let d;o===-1?d="":(d=e.slice(o+1,i===-1?void 0:i),s&&(d=it(d))),r?(n[c]&&Array.isArray(n[c])||(n[c]=[]),n[c].push(d)):n[c]??(n[c]=d)}return t?n[t]:n},vs=Er,ys=(e,t)=>Er(e,t,!0),gr=decodeURIComponent,Mt=e=>Rt(e,gr),Ee,D,K,yr,xr,pt,W,Kt,vr=(Kt=class{constructor(e,t="/",r=[[]]){N(this,K);g(this,"raw");N(this,Ee);N(this,D);g(this,"routeIndex",0);g(this,"path");g(this,"bodyCache",{});N(this,W,e=>{const{bodyCache:t,raw:r}=this,s=t[e];if(s)return s;const n=Object.keys(t)[0];return n?t[n].then(a=>(n==="json"&&(a=JSON.stringify(a)),new Response(a)[e]())):t[e]=r[e]()});this.raw=e,this.path=t,x(this,D,r),x(this,Ee,{})}param(e){return e?b(this,K,yr).call(this,e):b(this,K,xr).call(this)}query(e){return vs(this.url,e)}queries(e){return ys(this.url,e)}header(e){if(e)return this.raw.headers.get(e)??void 0;const t={};return this.raw.headers.forEach((r,s)=>{t[s]=r}),t}async parseBody(e){var t;return(t=this.bodyCache).parsedBody??(t.parsedBody=await os(this,e))}json(){return u(this,W).call(this,"text").then(e=>JSON.parse(e))}text(){return u(this,W).call(this,"text")}arrayBuffer(){return u(this,W).call(this,"arrayBuffer")}blob(){return u(this,W).call(this,"blob")}formData(){return u(this,W).call(this,"formData")}addValidatedData(e,t){u(this,Ee)[e]=t}valid(e){return u(this,Ee)[e]}get url(){return this.raw.url}get method(){return this.raw.method}get[is](){return u(this,D)}get matchedRoutes(){return u(this,D)[0].map(([[,e]])=>e)}get routePath(){return u(this,D)[0].map(([[,e]])=>e)[this.routeIndex].path}},Ee=new WeakMap,D=new WeakMap,K=new WeakSet,yr=function(e){const t=u(this,D)[0][this.routeIndex][1][e],r=b(this,K,pt).call(this,t);return r&&/\%/.test(r)?Mt(r):r},xr=function(){const e={},t=Object.keys(u(this,D)[0][this.routeIndex][1]);for(const r of t){const s=b(this,K,pt).call(this,u(this,D)[0][this.routeIndex][1][r]);s!==void 0&&(e[r]=/\%/.test(s)?Mt(s):s)}return e},pt=function(e){return u(this,D)[1]?u(this,D)[1][e]:e},W=new WeakMap,Kt),xs="text/plain; charset=UTF-8",ot=(e,t)=>({"Content-Type":e,...t}),Ce,Ie,X,ge,G,I,Me,ve,ye,ae,De,je,Y,me,Vt,Ts=(Vt=class{constructor(e,t){N(this,Y);N(this,Ce);N(this,Ie);g(this,"env",{});N(this,X);g(this,"finalized",!1);g(this,"error");N(this,ge);N(this,G);N(this,I);N(this,Me);N(this,ve);N(this,ye);N(this,ae);N(this,De);N(this,je);g(this,"render",(...e)=>(u(this,ve)??x(this,ve,t=>this.html(t)),u(this,ve).call(this,...e)));g(this,"setLayout",e=>x(this,Me,e));g(this,"getLayout",()=>u(this,Me));g(this,"setRenderer",e=>{x(this,ve,e)});g(this,"header",(e,t,r)=>{this.finalized&&x(this,I,new Response(u(this,I).body,u(this,I)));const s=u(this,I)?u(this,I).headers:u(this,ae)??x(this,ae,new Headers);t===void 0?s.delete(e):r!=null&&r.append?s.append(e,t):s.set(e,t)});g(this,"status",e=>{x(this,ge,e)});g(this,"set",(e,t)=>{u(this,X)??x(this,X,new Map),u(this,X).set(e,t)});g(this,"get",e=>u(this,X)?u(this,X).get(e):void 0);g(this,"newResponse",(...e)=>b(this,Y,me).call(this,...e));g(this,"body",(e,t,r)=>b(this,Y,me).call(this,e,t,r));g(this,"text",(e,t,r)=>!u(this,ae)&&!u(this,ge)&&!t&&!r&&!this.finalized?new Response(e):b(this,Y,me).call(this,e,t,ot(xs,r)));g(this,"json",(e,t,r)=>b(this,Y,me).call(this,JSON.stringify(e),t,ot("application/json",r)));g(this,"html",(e,t,r)=>{const s=n=>b(this,Y,me).call(this,n,t,ot("text/html; charset=UTF-8",r));return typeof e=="object"?ar(e,rr.Stringify,!1,{}).then(s):s(e)});g(this,"redirect",(e,t)=>{const r=String(e);return this.header("Location",/[^\x00-\xFF]/.test(r)?encodeURI(r):r),this.newResponse(null,t??302)});g(this,"notFound",()=>(u(this,ye)??x(this,ye,()=>new Response),u(this,ye).call(this,this)));x(this,Ce,e),t&&(x(this,G,t.executionCtx),this.env=t.env,x(this,ye,t.notFoundHandler),x(this,je,t.path),x(this,De,t.matchResult))}get req(){return u(this,Ie)??x(this,Ie,new vr(u(this,Ce),u(this,je),u(this,De))),u(this,Ie)}get event(){if(u(this,G)&&"respondWith"in u(this,G))return u(this,G);throw Error("This context has no FetchEvent")}get executionCtx(){if(u(this,G))return u(this,G);throw Error("This context has no ExecutionContext")}get res(){return u(this,I)||x(this,I,new Response(null,{headers:u(this,ae)??x(this,ae,new Headers)}))}set res(e){if(u(this,I)&&e){e=new Response(e.body,e);for(const[t,r]of u(this,I).headers.entries())if(t!=="content-type")if(t==="set-cookie"){const s=u(this,I).headers.getSetCookie();e.headers.delete("set-cookie");for(const n of s)e.headers.append("set-cookie",n)}else e.headers.set(t,r)}x(this,I,e),this.finalized=!0}get var(){return u(this,X)?Object.fromEntries(u(this,X)):{}}},Ce=new WeakMap,Ie=new WeakMap,X=new WeakMap,ge=new WeakMap,G=new WeakMap,I=new WeakMap,Me=new WeakMap,ve=new WeakMap,ye=new WeakMap,ae=new WeakMap,De=new WeakMap,je=new WeakMap,Y=new WeakSet,me=function(e,t,r){const s=u(this,I)?new Headers(u(this,I).headers):u(this,ae)??new Headers;if(typeof t=="object"&&"headers"in t){const a=t.headers instanceof Headers?t.headers:new Headers(t.headers);for(const[i,o]of a)i.toLowerCase()==="set-cookie"?s.append(i,o):s.set(i,o)}if(r)for(const[a,i]of Object.entries(r))if(typeof i=="string")s.set(a,i);else{s.delete(a);for(const o of i)s.append(a,o)}const n=typeof t=="number"?t:(t==null?void 0:t.status)??u(this,ge);return new Response(e,{status:n,headers:s})},Vt),O="ALL",Ns="all",Rs=["get","post","put","delete","options","patch"],Tr="Can not add a route since the matcher is already built.",Nr=class extends Error{},As="__COMPOSED_HANDLER",bs=e=>e.text("404 Not Found",404),Dt=(e,t)=>{if("getResponse"in e){const r=e.getResponse();return t.newResponse(r.body,r)}return console.error(e),t.text("Internal Server Error",500)},P,S,Ar,k,se,Ke,Ve,Wt,Rr=(Wt=class{constructor(t={}){N(this,S);g(this,"get");g(this,"post");g(this,"put");g(this,"delete");g(this,"options");g(this,"patch");g(this,"all");g(this,"on");g(this,"use");g(this,"router");g(this,"getPath");g(this,"_basePath","/");N(this,P,"/");g(this,"routes",[]);N(this,k,bs);g(this,"errorHandler",Dt);g(this,"onError",t=>(this.errorHandler=t,this));g(this,"notFound",t=>(x(this,k,t),this));g(this,"fetch",(t,...r)=>b(this,S,Ve).call(this,t,r[1],r[0],t.method));g(this,"request",(t,r,s,n)=>t instanceof Request?this.fetch(r?new Request(t,r):t,s,n):(t=t.toString(),this.fetch(new Request(/^https?:\/\//.test(t)?t:`http://localhost${he("/",t)}`,r),s,n)));g(this,"fire",()=>{addEventListener("fetch",t=>{t.respondWith(b(this,S,Ve).call(this,t.request,t,void 0,t.request.method))})});[...Rs,Ns].forEach(a=>{this[a]=(i,...o)=>(typeof i=="string"?x(this,P,i):b(this,S,se).call(this,a,u(this,P),i),o.forEach(c=>{b(this,S,se).call(this,a,u(this,P),c)}),this)}),this.on=(a,i,...o)=>{for(const c of[i].flat()){x(this,P,c);for(const d of[a].flat())o.map(f=>{b(this,S,se).call(this,d.toUpperCase(),u(this,P),f)})}return this},this.use=(a,...i)=>(typeof a=="string"?x(this,P,a):(x(this,P,"*"),i.unshift(a)),i.forEach(o=>{b(this,S,se).call(this,O,u(this,P),o)}),this);const{strict:s,...n}=t;Object.assign(this,n),this.getPath=s??!0?t.getPath??mr:gs}route(t,r){const s=this.basePath(t);return r.routes.map(n=>{var i;let a;r.errorHandler===Dt?a=n.handler:(a=async(o,c)=>(await It([],r.errorHandler)(o,()=>n.handler(o,c))).res,a[As]=n.handler),b(i=s,S,se).call(i,n.method,n.path,a)}),this}basePath(t){const r=b(this,S,Ar).call(this);return r._basePath=he(this._basePath,t),r}mount(t,r,s){let n,a;s&&(typeof s=="function"?a=s:(a=s.optionHandler,s.replaceRequest===!1?n=c=>c:n=s.replaceRequest));const i=a?c=>{const d=a(c);return Array.isArray(d)?d:[d]}:c=>{let d;try{d=c.executionCtx}catch{}return[c.env,d]};n||(n=(()=>{const c=he(this._basePath,t),d=c==="/"?0:c.length;return f=>{const h=new URL(f.url);return h.pathname=h.pathname.slice(d)||"/",new Request(h,f)}})());const o=async(c,d)=>{const f=await r(n(c.req.raw),...i(c));if(f)return f;await d()};return b(this,S,se).call(this,O,he(t,"*"),o),this}},P=new WeakMap,S=new WeakSet,Ar=function(){const t=new Rr({router:this.router,getPath:this.getPath});return t.errorHandler=this.errorHandler,x(t,k,u(this,k)),t.routes=this.routes,t},k=new WeakMap,se=function(t,r,s){t=t.toUpperCase(),r=he(this._basePath,r);const n={basePath:this._basePath,path:r,method:t,handler:s};this.router.add(t,r,[s,n]),this.routes.push(n)},Ke=function(t,r){if(t instanceof Error)return this.errorHandler(t,r);throw t},Ve=function(t,r,s,n){if(n==="HEAD")return(async()=>new Response(null,await b(this,S,Ve).call(this,t,r,s,"GET")))();const a=this.getPath(t,{env:s}),i=this.router.match(n,a),o=new Ts(t,{path:a,matchResult:i,env:s,executionCtx:r,notFoundHandler:u(this,k)});if(i[0].length===1){let d;try{d=i[0][0][0][0](o,async()=>{o.res=await u(this,k).call(this,o)})}catch(f){return b(this,S,Ke).call(this,f,o)}return d instanceof Promise?d.then(f=>f||(o.finalized?o.res:u(this,k).call(this,o))).catch(f=>b(this,S,Ke).call(this,f,o)):d??u(this,k).call(this,o)}const c=It(i[0],this.errorHandler,u(this,k));return(async()=>{try{const d=await c(o);if(!d.finalized)throw new Error("Context is not finalized. Did you forget to return a Response object or `await next()`?");return d.res}catch(d){return b(this,S,Ke).call(this,d,o)}})()},Wt),et="[^/]+",_e=".*",Oe="(?:|/.*)",pe=Symbol(),ws=new Set(".\\+*[^]$()");function _s(e,t){return e.length===1?t.length===1?e<t?-1:1:-1:t.length===1||e===_e||e===Oe?1:t===_e||t===Oe?-1:e===et?1:t===et?-1:e.length===t.length?e<t?-1:1:t.length-e.length}var ie,oe,$,Yt,Et=(Yt=class{constructor(){N(this,ie);N(this,oe);N(this,$,Object.create(null))}insert(t,r,s,n,a){if(t.length===0){if(u(this,ie)!==void 0)throw pe;if(a)return;x(this,ie,r);return}const[i,...o]=t,c=i==="*"?o.length===0?["","",_e]:["","",et]:i==="/*"?["","",Oe]:i.match(/^\:([^\{\}]+)(?:\{(.+)\})?$/);let d;if(c){const f=c[1];let h=c[2]||et;if(f&&c[2]&&(h===".*"||(h=h.replace(/^\((?!\?:)(?=[^)]+\)$)/,"(?:"),/\((?!\?:)/.test(h))))throw pe;if(d=u(this,$)[h],!d){if(Object.keys(u(this,$)).some(m=>m!==_e&&m!==Oe))throw pe;if(a)return;d=u(this,$)[h]=new Et,f!==""&&x(d,oe,n.varIndex++)}!a&&f!==""&&s.push([f,u(d,oe)])}else if(d=u(this,$)[i],!d){if(Object.keys(u(this,$)).some(f=>f.length>1&&f!==_e&&f!==Oe))throw pe;if(a)return;d=u(this,$)[i]=new Et}d.insert(o,r,s,n,a)}buildRegExpStr(){const r=Object.keys(u(this,$)).sort(_s).map(s=>{const n=u(this,$)[s];return(typeof u(n,oe)=="number"?`(${s})@${u(n,oe)}`:ws.has(s)?`\\${s}`:s)+n.buildRegExpStr()});return typeof u(this,ie)=="number"&&r.unshift(`#${u(this,ie)}`),r.length===0?"":r.length===1?r[0]:"(?:"+r.join("|")+")"}},ie=new WeakMap,oe=new WeakMap,$=new WeakMap,Yt),tt,Pe,Jt,Os=(Jt=class{constructor(){N(this,tt,{varIndex:0});N(this,Pe,new Et)}insert(e,t,r){const s=[],n=[];for(let i=0;;){let o=!1;if(e=e.replace(/\{[^}]+\}/g,c=>{const d=`@\\${i}`;return n[i]=[d,c],i++,o=!0,d}),!o)break}const a=e.match(/(?::[^\/]+)|(?:\/\*$)|./g)||[];for(let i=n.length-1;i>=0;i--){const[o]=n[i];for(let c=a.length-1;c>=0;c--)if(a[c].indexOf(o)!==-1){a[c]=a[c].replace(o,n[i][1]);break}}return u(this,Pe).insert(a,t,s,u(this,tt),r),s}buildRegExp(){let e=u(this,Pe).buildRegExpStr();if(e==="")return[/^$/,[],[]];let t=0;const r=[],s=[];return e=e.replace(/#(\d+)|@(\d+)|\.\*\$/g,(n,a,i)=>a!==void 0?(r[++t]=Number(a),"$()"):(i!==void 0&&(s[Number(i)]=++t),"")),[new RegExp(`^${e}`),r,s]}},tt=new WeakMap,Pe=new WeakMap,Jt),br=[],Ss=[/^$/,[],Object.create(null)],We=Object.create(null);function wr(e){return We[e]??(We[e]=new RegExp(e==="*"?"":`^${e.replace(/\/\*$|([.\\+*[^\]$()])/g,(t,r)=>r?`\\${r}`:"(?:|/.*)")}$`))}function Ls(){We=Object.create(null)}function Us(e){var d;const t=new Os,r=[];if(e.length===0)return Ss;const s=e.map(f=>[!/\*|\/:/.test(f[0]),...f]).sort(([f,h],[m,E])=>f?1:m?-1:h.length-E.length),n=Object.create(null);for(let f=0,h=-1,m=s.length;f<m;f++){const[E,y,p]=s[f];E?n[y]=[p.map(([T])=>[T,Object.create(null)]),br]:h++;let v;try{v=t.insert(y,h,E)}catch(T){throw T===pe?new Nr(y):T}E||(r[h]=p.map(([T,R])=>{const w=Object.create(null);for(R-=1;R>=0;R--){const[A,U]=v[R];w[A]=U}return[T,w]}))}const[a,i,o]=t.buildRegExp();for(let f=0,h=r.length;f<h;f++)for(let m=0,E=r[f].length;m<E;m++){const y=(d=r[f][m])==null?void 0:d[1];if(!y)continue;const p=Object.keys(y);for(let v=0,T=p.length;v<T;v++)y[p[v]]=o[y[p[v]]]}const c=[];for(const f in i)c[f]=r[i[f]];return[a,c,n]}function ue(e,t){if(e){for(const r of Object.keys(e).sort((s,n)=>n.length-s.length))if(wr(r).test(t))return[...e[r]]}}var J,Z,Re,_r,Or,Zt,Cs=(Zt=class{constructor(){N(this,Re);g(this,"name","RegExpRouter");N(this,J);N(this,Z);x(this,J,{[O]:Object.create(null)}),x(this,Z,{[O]:Object.create(null)})}add(e,t,r){var o;const s=u(this,J),n=u(this,Z);if(!s||!n)throw new Error(Tr);s[e]||[s,n].forEach(c=>{c[e]=Object.create(null),Object.keys(c[O]).forEach(d=>{c[e][d]=[...c[O][d]]})}),t==="/*"&&(t="*");const a=(t.match(/\/:/g)||[]).length;if(/\*$/.test(t)){const c=wr(t);e===O?Object.keys(s).forEach(d=>{var f;(f=s[d])[t]||(f[t]=ue(s[d],t)||ue(s[O],t)||[])}):(o=s[e])[t]||(o[t]=ue(s[e],t)||ue(s[O],t)||[]),Object.keys(s).forEach(d=>{(e===O||e===d)&&Object.keys(s[d]).forEach(f=>{c.test(f)&&s[d][f].push([r,a])})}),Object.keys(n).forEach(d=>{(e===O||e===d)&&Object.keys(n[d]).forEach(f=>c.test(f)&&n[d][f].push([r,a]))});return}const i=pr(t)||[t];for(let c=0,d=i.length;c<d;c++){const f=i[c];Object.keys(n).forEach(h=>{var m;(e===O||e===h)&&((m=n[h])[f]||(m[f]=[...ue(s[h],f)||ue(s[O],f)||[]]),n[h][f].push([r,a-d+c+1]))})}}match(e,t){Ls();const r=b(this,Re,_r).call(this);return this.match=(s,n)=>{const a=r[s]||r[O],i=a[2][n];if(i)return i;const o=n.match(a[0]);if(!o)return[[],br];const c=o.indexOf("",1);return[a[1][c],o]},this.match(e,t)}},J=new WeakMap,Z=new WeakMap,Re=new WeakSet,_r=function(){const e=Object.create(null);return Object.keys(u(this,Z)).concat(Object.keys(u(this,J))).forEach(t=>{e[t]||(e[t]=b(this,Re,Or).call(this,t))}),x(this,J,x(this,Z,void 0)),e},Or=function(e){const t=[];let r=e===O;return[u(this,J),u(this,Z)].forEach(s=>{const n=s[e]?Object.keys(s[e]).map(a=>[a,s[e][a]]):[];n.length!==0?(r||(r=!0),t.push(...n)):e!==O&&t.push(...Object.keys(s[O]).map(a=>[a,s[O][a]]))}),r?Us(t):null},Zt),Q,q,Qt,Is=(Qt=class{constructor(e){g(this,"name","SmartRouter");N(this,Q,[]);N(this,q,[]);x(this,Q,e.routers)}add(e,t,r){if(!u(this,q))throw new Error(Tr);u(this,q).push([e,t,r])}match(e,t){if(!u(this,q))throw new Error("Fatal error");const r=u(this,Q),s=u(this,q),n=r.length;let a=0,i;for(;a<n;a++){const o=r[a];try{for(let c=0,d=s.length;c<d;c++)o.add(...s[c]);i=o.match(e,t)}catch(c){if(c instanceof Nr)continue;throw c}this.match=o.match.bind(o),x(this,Q,[o]),x(this,q,void 0);break}if(a===n)throw new Error("Fatal error");return this.name=`SmartRouter + ${this.activeRouter.name}`,i}get activeRouter(){if(u(this,q)||u(this,Q).length!==1)throw new Error("No active router has been determined yet.");return u(this,Q)[0]}},Q=new WeakMap,q=new WeakMap,Qt),be=Object.create(null),ee,C,ce,xe,L,z,ne,er,Sr=(er=class{constructor(e,t,r){N(this,z);N(this,ee);N(this,C);N(this,ce);N(this,xe,0);N(this,L,be);if(x(this,C,r||Object.create(null)),x(this,ee,[]),e&&t){const s=Object.create(null);s[e]={handler:t,possibleKeys:[],score:0},x(this,ee,[s])}x(this,ce,[])}insert(e,t,r){x(this,xe,++_t(this,xe)._);let s=this;const n=fs(t),a=[];for(let i=0,o=n.length;i<o;i++){const c=n[i],d=n[i+1],f=ps(c,d),h=Array.isArray(f)?f[0]:c;if(h in u(s,C)){s=u(s,C)[h],f&&a.push(f[1]);continue}u(s,C)[h]=new Sr,f&&(u(s,ce).push(f),a.push(f[1])),s=u(s,C)[h]}return u(s,ee).push({[e]:{handler:r,possibleKeys:a.filter((i,o,c)=>c.indexOf(i)===o),score:u(this,xe)}}),s}search(e,t){var o;const r=[];x(this,L,be);let n=[this];const a=hr(t),i=[];for(let c=0,d=a.length;c<d;c++){const f=a[c],h=c===d-1,m=[];for(let E=0,y=n.length;E<y;E++){const p=n[E],v=u(p,C)[f];v&&(x(v,L,u(p,L)),h?(u(v,C)["*"]&&r.push(...b(this,z,ne).call(this,u(v,C)["*"],e,u(p,L))),r.push(...b(this,z,ne).call(this,v,e,u(p,L)))):m.push(v));for(let T=0,R=u(p,ce).length;T<R;T++){const w=u(p,ce)[T],A=u(p,L)===be?{}:{...u(p,L)};if(w==="*"){const V=u(p,C)["*"];V&&(r.push(...b(this,z,ne).call(this,V,e,u(p,L))),x(V,L,A),m.push(V));continue}const[U,de,re]=w;if(!f&&!(re instanceof RegExp))continue;const B=u(p,C)[U],Br=a.slice(c).join("/");if(re instanceof RegExp){const V=re.exec(Br);if(V){if(A[de]=V[0],r.push(...b(this,z,ne).call(this,B,e,u(p,L),A)),Object.keys(u(B,C)).length){x(B,L,A);const rt=((o=V[0].match(/\//))==null?void 0:o.length)??0;(i[rt]||(i[rt]=[])).push(B)}continue}}(re===!0||re.test(f))&&(A[de]=f,h?(r.push(...b(this,z,ne).call(this,B,e,A,u(p,L))),u(B,C)["*"]&&r.push(...b(this,z,ne).call(this,u(B,C)["*"],e,A,u(p,L)))):(x(B,L,A),m.push(B)))}}n=m.concat(i.shift()??[])}return r.length>1&&r.sort((c,d)=>c.score-d.score),[r.map(({handler:c,params:d})=>[c,d])]}},ee=new WeakMap,C=new WeakMap,ce=new WeakMap,xe=new WeakMap,L=new WeakMap,z=new WeakSet,ne=function(e,t,r,s){const n=[];for(let a=0,i=u(e,ee).length;a<i;a++){const o=u(e,ee)[a],c=o[t]||o[O],d={};if(c!==void 0&&(c.params=Object.create(null),n.push(c),r!==be||s&&s!==be))for(let f=0,h=c.possibleKeys.length;f<h;f++){const m=c.possibleKeys[f],E=d[c.score];c.params[m]=s!=null&&s[m]&&!E?s[m]:r[m]??(s==null?void 0:s[m]),d[c.score]=!0}}return n},er),le,tr,Ms=(tr=class{constructor(){g(this,"name","TrieRouter");N(this,le);x(this,le,new Sr)}add(e,t,r){const s=pr(t);if(s){for(let n=0,a=s.length;n<a;n++)u(this,le).insert(e,s[n],r);return}u(this,le).insert(e,t,r)}match(e,t){return u(this,le).search(e,t)}},le=new WeakMap,tr),Lr=class extends Rr{constructor(e={}){super(e),this.router=e.router??new Is({routers:[new Cs,new Ms]})}},Ds=e=>{const r={...{origin:"*",allowMethods:["GET","HEAD","PUT","POST","DELETE","PATCH"],allowHeaders:[],exposeHeaders:[]},...e},s=(a=>typeof a=="string"?a==="*"?()=>a:i=>a===i?i:null:typeof a=="function"?a:i=>a.includes(i)?i:null)(r.origin),n=(a=>typeof a=="function"?a:Array.isArray(a)?()=>a:()=>[])(r.allowMethods);return async function(i,o){var f;function c(h,m){i.res.headers.set(h,m)}const d=await s(i.req.header("origin")||"",i);if(d&&c("Access-Control-Allow-Origin",d),r.origin!=="*"){const h=i.req.header("Vary");h?c("Vary",h):c("Vary","Origin")}if(r.credentials&&c("Access-Control-Allow-Credentials","true"),(f=r.exposeHeaders)!=null&&f.length&&c("Access-Control-Expose-Headers",r.exposeHeaders.join(",")),i.req.method==="OPTIONS"){r.maxAge!=null&&c("Access-Control-Max-Age",r.maxAge.toString());const h=await n(i.req.header("origin")||"",i);h.length&&c("Access-Control-Allow-Methods",h.join(","));let m=r.allowHeaders;if(!(m!=null&&m.length)){const E=i.req.header("Access-Control-Request-Headers");E&&(m=E.split(/\s*,\s*/))}return m!=null&&m.length&&(c("Access-Control-Allow-Headers",m.join(",")),i.res.headers.append("Vary","Access-Control-Request-Headers")),i.res.headers.delete("Content-Length"),i.res.headers.delete("Content-Type"),new Response(null,{headers:i.res.headers,status:204,statusText:"No Content"})}await o()}};function js(){const{process:e,Deno:t}=globalThis;return!(typeof(t==null?void 0:t.noColor)=="boolean"?t.noColor:e!==void 0?"NO_COLOR"in(e==null?void 0:e.env):!1)}async function Ps(){const{navigator:e}=globalThis,t="cloudflare:workers";return!(e!==void 0&&e.userAgent==="Cloudflare-Workers"?await(async()=>{try{return"NO_COLOR"in((await import(t)).env??{})}catch{return!1}})():!js())}var ks=e=>{const[t,r]=[",","."];return e.map(n=>n.replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1"+t)).join(r)},$s=e=>{const t=Date.now()-e;return ks([t<1e3?t+"ms":Math.round(t/1e3)+"s"])},Fs=async e=>{if(await Ps())switch(e/100|0){case 5:return`\x1B[31m${e}\x1B[0m`;case 4:return`\x1B[33m${e}\x1B[0m`;case 3:return`\x1B[36m${e}\x1B[0m`;case 2:return`\x1B[32m${e}\x1B[0m`}return`${e}`};async function jt(e,t,r,s,n=0,a){const i=t==="<--"?`${t} ${r} ${s}`:`${t} ${r} ${s} ${await Fs(n)} ${a}`;e(i)}var Bs=(e=console.log)=>async function(r,s){const{method:n,url:a}=r.req,i=a.slice(a.indexOf("/",8));await jt(e,"<--",n,i);const o=Date.now();await s(),await jt(e,"-->",n,i,r.res.status,$s(o))},Hs=/^\s*(?:text\/(?!event-stream(?:[;\s]|$))[^;\s]+|application\/(?:javascript|json|xml|xml-dtd|ecmascript|dart|postscript|rtf|tar|toml|vnd\.dart|vnd\.ms-fontobject|vnd\.ms-opentype|wasm|x-httpd-php|x-javascript|x-ns-proxy-autoconfig|x-sh|x-tar|x-virtualbox-hdd|x-virtualbox-ova|x-virtualbox-ovf|x-virtualbox-vbox|x-virtualbox-vdi|x-virtualbox-vhd|x-virtualbox-vmdk|x-www-form-urlencoded)|font\/(?:otf|ttf)|image\/(?:bmp|vnd\.adobe\.photoshop|vnd\.microsoft\.icon|vnd\.ms-dds|x-icon|x-ms-bmp)|message\/rfc822|model\/gltf-binary|x-shader\/x-fragment|x-shader\/x-vertex|[^;\s]+?\+(?:json|text|xml|yaml))(?:[;\s]|$)/i,Pt=(e,t=Gs)=>{const r=/\.([a-zA-Z0-9]+?)$/,s=e.match(r);if(!s)return;let n=t[s[1]];return n&&n.startsWith("text")&&(n+="; charset=utf-8"),n},Xs={aac:"audio/aac",avi:"video/x-msvideo",avif:"image/avif",av1:"video/av1",bin:"application/octet-stream",bmp:"image/bmp",css:"text/css",csv:"text/csv",eot:"application/vnd.ms-fontobject",epub:"application/epub+zip",gif:"image/gif",gz:"application/gzip",htm:"text/html",html:"text/html",ico:"image/x-icon",ics:"text/calendar",jpeg:"image/jpeg",jpg:"image/jpeg",js:"text/javascript",json:"application/json",jsonld:"application/ld+json",map:"application/json",mid:"audio/x-midi",midi:"audio/x-midi",mjs:"text/javascript",mp3:"audio/mpeg",mp4:"video/mp4",mpeg:"video/mpeg",oga:"audio/ogg",ogv:"video/ogg",ogx:"application/ogg",opus:"audio/opus",otf:"font/otf",pdf:"application/pdf",png:"image/png",rtf:"application/rtf",svg:"image/svg+xml",tif:"image/tiff",tiff:"image/tiff",ts:"video/mp2t",ttf:"font/ttf",txt:"text/plain",wasm:"application/wasm",webm:"video/webm",weba:"audio/webm",webmanifest:"application/manifest+json",webp:"image/webp",woff:"font/woff",woff2:"font/woff2",xhtml:"application/xhtml+xml",xml:"application/xml",zip:"application/zip","3gp":"video/3gpp","3g2":"video/3gpp2",gltf:"model/gltf+json",glb:"model/gltf-binary"},Gs=Xs,qs=(...e)=>{let t=e.filter(n=>n!=="").join("/");t=t.replace(new RegExp("(?<=\\/)\\/+","g"),"");const r=t.split("/"),s=[];for(const n of r)n===".."&&s.length>0&&s.at(-1)!==".."?s.pop():n!=="."&&s.push(n);return s.join("/")||"."},Ur={br:".br",zstd:".zst",gzip:".gz"},zs=Object.keys(Ur),Ks="index.html",Vs=e=>{const t=e.root??"./",r=e.path,s=e.join??qs;return async(n,a)=>{var f,h,m,E;if(n.finalized)return a();let i;if(e.path)i=e.path;else try{if(i=decodeURIComponent(n.req.path),/(?:^|[\/\\])\.\.(?:$|[\/\\])/.test(i))throw new Error}catch{return await((f=e.onNotFound)==null?void 0:f.call(e,n.req.path,n)),a()}let o=s(t,!r&&e.rewriteRequestPath?e.rewriteRequestPath(i):i);e.isDir&&await e.isDir(o)&&(o=s(o,Ks));const c=e.getContent;let d=await c(o,n);if(d instanceof Response)return n.newResponse(d.body,d);if(d){const y=e.mimes&&Pt(o,e.mimes)||Pt(o);if(n.header("Content-Type",y||"application/octet-stream"),e.precompressed&&(!y||Hs.test(y))){const p=new Set((h=n.req.header("Accept-Encoding"))==null?void 0:h.split(",").map(v=>v.trim()));for(const v of zs){if(!p.has(v))continue;const T=await c(o+Ur[v],n);if(T){d=T,n.header("Content-Encoding",v),n.header("Vary","Accept-Encoding",{append:!0});break}}}return await((m=e.onFound)==null?void 0:m.call(e,o,n)),n.body(d)}await((E=e.onNotFound)==null?void 0:E.call(e,o,n)),await a()}},Ws=async(e,t)=>{let r;t&&t.manifest?typeof t.manifest=="string"?r=JSON.parse(t.manifest):r=t.manifest:typeof __STATIC_CONTENT_MANIFEST=="string"?r=JSON.parse(__STATIC_CONTENT_MANIFEST):r=__STATIC_CONTENT_MANIFEST;let s;t&&t.namespace?s=t.namespace:s=__STATIC_CONTENT;const n=r[e]||e;if(!n)return null;const a=await s.get(n,{type:"stream"});return a||null},Ys=e=>async function(r,s){return Vs({...e,getContent:async a=>Ws(a,{manifest:e.manifest,namespace:e.namespace?e.namespace:r.env?r.env.__STATIC_CONTENT:void 0})})(r,s)},Js=e=>Ys(e),Le="_hp",Zs={Change:"Input",DoubleClick:"DblClick"},Qs={svg:"2000/svg",math:"1998/Math/MathML"},Ue=[],gt=new WeakMap,Ne=void 0,en=()=>Ne,H=e=>"t"in e,ct={onClick:["click",!1]},kt=e=>{if(!e.startsWith("on"))return;if(ct[e])return ct[e];const t=e.match(/^on([A-Z][a-zA-Z]+?(?:PointerCapture)?)(Capture)?$/);if(t){const[,r,s]=t;return ct[e]=[(Zs[r]||r).toLowerCase(),!!s]}},$t=(e,t)=>Ne&&e instanceof SVGElement&&/[A-Z]/.test(t)&&(t in e.style||t.match(/^(?:o|pai|str|u|ve)/))?t.replace(/([A-Z])/g,"-$1").toLowerCase():t,tn=(e,t,r)=>{var s;t||(t={});for(let n in t){const a=t[n];if(n!=="children"&&(!r||r[n]!==a)){n=Qe(n);const i=kt(n);if(i){if((r==null?void 0:r[n])!==a&&(r&&e.removeEventListener(i[0],r[n],i[1]),a!=null)){if(typeof a!="function")throw new Error(`Event handler for "${n}" is not a function`);e.addEventListener(i[0],a,i[1])}}else if(n==="dangerouslySetInnerHTML"&&a)e.innerHTML=a.__html;else if(n==="ref"){let o;typeof a=="function"?o=a(e)||(()=>a(null)):a&&"current"in a&&(a.current=e,o=()=>a.current=null),gt.set(e,o)}else if(n==="style"){const o=e.style;typeof a=="string"?o.cssText=a:(o.cssText="",a!=null&&ur(a,o.setProperty.bind(o)))}else{if(n==="value"){const c=e.nodeName;if(c==="INPUT"||c==="TEXTAREA"||c==="SELECT"){if(e.value=a==null||a===!1?null:a,c==="TEXTAREA"){e.textContent=a;continue}else if(c==="SELECT"){e.selectedIndex===-1&&(e.selectedIndex=0);continue}}}else(n==="checked"&&e.nodeName==="INPUT"||n==="selected"&&e.nodeName==="OPTION")&&(e[n]=a);const o=$t(e,n);a==null||a===!1?e.removeAttribute(o):a===!0?e.setAttribute(o,""):typeof a=="string"||typeof a=="number"?e.setAttribute(o,a):e.setAttribute(o,a.toString())}}}if(r)for(let n in r){const a=r[n];if(n!=="children"&&!(n in t)){n=Qe(n);const i=kt(n);i?e.removeEventListener(i[0],a,i[1]):n==="ref"?(s=gt.get(e))==null||s():e.removeAttribute($t(e,n))}}},rn=(e,t)=>{t[_][0]=0,Ue.push([e,t]);const r=t.tag[yt]||t.tag,s=r.defaultProps?{...r.defaultProps,...t.props}:t.props;try{return[r.call(null,s)]}finally{Ue.pop()}},Cr=(e,t,r,s,n)=>{var a,i;(a=e.vR)!=null&&a.length&&(s.push(...e.vR),delete e.vR),typeof e.tag=="function"&&((i=e[_][1][jr])==null||i.forEach(o=>n.push(o))),e.vC.forEach(o=>{var c;if(H(o))r.push(o);else if(typeof o.tag=="function"||o.tag===""){o.c=t;const d=r.length;if(Cr(o,t,r,s,n),o.s){for(let f=d;f<r.length;f++)r[f].s=!0;o.s=!1}}else r.push(o),(c=o.vR)!=null&&c.length&&(s.push(...o.vR),delete o.vR)})},sn=e=>{for(;;e=e.tag===Le||!e.vC||!e.pP?e.nN:e.vC[0]){if(!e)return null;if(e.tag!==Le&&e.e)return e.e}},Ir=e=>{var t,r,s,n,a,i;H(e)||((r=(t=e[_])==null?void 0:t[1][jr])==null||r.forEach(o=>{var c;return(c=o[2])==null?void 0:c.call(o)}),(s=gt.get(e.e))==null||s(),e.p===2&&((n=e.vC)==null||n.forEach(o=>o.p=2)),(a=e.vC)==null||a.forEach(Ir)),e.p||((i=e.e)==null||i.remove(),delete e.e),typeof e.tag=="function"&&(we.delete(e),Ye.delete(e),delete e[_][3],e.a=!0)},Mr=(e,t,r)=>{e.c=t,Dr(e,t,r)},Ft=(e,t)=>{if(t){for(let r=0,s=e.length;r<s;r++)if(e[r]===t)return r}},Bt=Symbol(),Dr=(e,t,r)=>{var d;const s=[],n=[],a=[];Cr(e,t,s,n,a),n.forEach(Ir);const i=r?void 0:t.childNodes;let o,c=null;if(r)o=-1;else if(!i.length)o=0;else{const f=Ft(i,sn(e.nN));f!==void 0?(c=i[f],o=f):o=Ft(i,(d=s.find(h=>h.tag!==Le&&h.e))==null?void 0:d.e)??-1,o===-1&&(r=!0)}for(let f=0,h=s.length;f<h;f++,o++){const m=s[f];let E;if(m.s&&m.e)E=m.e,m.s=!1;else{const y=r||!m.e;H(m)?(m.e&&m.d&&(m.e.textContent=m.t),m.d=!1,E=m.e||(m.e=document.createTextNode(m.t))):(E=m.e||(m.e=m.n?document.createElementNS(m.n,m.tag):document.createElement(m.tag)),tn(E,m.props,m.pP),Dr(m,E,y))}m.tag===Le?o--:r?E.parentNode||t.appendChild(E):i[o]!==E&&i[o-1]!==E&&(i[o+1]===E?t.appendChild(i[o]):t.insertBefore(E,c||i[o]||null))}if(e.pP&&delete e.pP,a.length){const f=[],h=[];a.forEach(([,m,,E,y])=>{m&&f.push(m),E&&h.push(E),y==null||y()}),f.forEach(m=>m()),h.length&&requestAnimationFrame(()=>{h.forEach(m=>m())})}},nn=(e,t)=>!!(e&&e.length===t.length&&e.every((r,s)=>r[1]===t[s][1])),Ye=new WeakMap,vt=(e,t,r)=>{var a,i,o,c,d,f;const s=!r&&t.pC;r&&(t.pC||(t.pC=t.vC));let n;try{r||(r=typeof t.tag=="function"?rn(e,t):ke(t.props.children)),((a=r[0])==null?void 0:a.tag)===""&&r[0][ht]&&(n=r[0][ht],e[5].push([e,n,t]));const h=s?[...t.pC]:t.vC?[...t.vC]:void 0,m=[];let E;for(let y=0;y<r.length;y++){Array.isArray(r[y])&&r.splice(y,1,...r[y].flat());let p=an(r[y]);if(p){typeof p.tag=="function"&&!p.tag[ir]&&(Te.length>0&&(p[_][2]=Te.map(T=>[T,T.values.at(-1)])),(i=e[5])!=null&&i.length&&(p[_][3]=e[5].at(-1)));let v;if(h&&h.length){const T=h.findIndex(H(p)?R=>H(R):p.key!==void 0?R=>R.key===p.key&&R.tag===p.tag:R=>R.tag===p.tag);T!==-1&&(v=h[T],h.splice(T,1))}if(v)if(H(p))v.t!==p.t&&(v.t=p.t,v.d=!0),p=v;else{const T=v.pP=v.props;if(v.props=p.props,v.f||(v.f=p.f||t.f),typeof p.tag=="function"){const R=v[_][2];v[_][2]=p[_][2]||[],v[_][3]=p[_][3],!v.f&&((v.o||v)===p.o||(c=(o=v.tag)[zr])!=null&&c.call(o,T,v.props))&&nn(R,v[_][2])&&(v.s=!0)}p=v}else if(!H(p)&&Ne){const T=Ae(Ne);T&&(p.n=T)}if(!H(p)&&!p.s&&(vt(e,p),delete p.f),m.push(p),E&&!E.s&&!p.s)for(let T=E;T&&!H(T);T=(d=T.vC)==null?void 0:d.at(-1))T.nN=p;E=p}}t.vR=s?[...t.vC,...h||[]]:h||[],t.vC=m,s&&delete t.pC}catch(h){if(t.f=!0,h===Bt){if(n)return;throw h}const[m,E,y]=((f=t[_])==null?void 0:f[3])||[];if(E){const p=()=>Je([0,!1,e[2]],y),v=Ye.get(y)||[];v.push(p),Ye.set(y,v);const T=E(h,()=>{const R=Ye.get(y);if(R){const w=R.indexOf(p);if(w!==-1)return R.splice(w,1),p()}});if(T){if(e[0]===1)e[1]=!0;else if(vt(e,y,[T]),(E.length===1||e!==m)&&y.c){Mr(y,y.c,!1);return}throw Bt}}throw h}finally{n&&e[5].pop()}},an=e=>{if(!(e==null||typeof e=="boolean")){if(typeof e=="string"||typeof e=="number")return{t:e.toString(),d:!0};if("vR"in e&&(e={tag:e.tag,props:e.props,key:e.key,f:e.f,type:e.tag,ref:e.props.ref,o:e.o||e}),typeof e.tag=="function")e[_]=[0,[]];else{const t=Qs[e.tag];t&&(Ne||(Ne=cr("")),e.props.children=[{tag:Ne,props:{value:e.n=`http://www.w3.org/${t}`,children:e.props.children}}])}return e}},Ht=(e,t)=>{var r,s;(r=t[_][2])==null||r.forEach(([n,a])=>{n.values.push(a)});try{vt(e,t,void 0)}catch{return}if(t.a){delete t.a;return}(s=t[_][2])==null||s.forEach(([n])=>{n.values.pop()}),(e[0]!==1||!e[1])&&Mr(t,t.c,!1)},we=new WeakMap,Xt=[],Je=async(e,t)=>{e[5]||(e[5]=[]);const r=we.get(t);r&&r[0](void 0);let s;const n=new Promise(a=>s=a);if(we.set(t,[s,()=>{e[2]?e[2](e,t,a=>{Ht(a,t)}).then(()=>s(t)):(Ht(e,t),s(t))}]),Xt.length)Xt.at(-1).add(t);else{await Promise.resolve();const a=we.get(t);a&&(we.delete(t),a[1]())}return n},on=(e,t,r)=>({tag:Le,props:{children:e},key:r,e:t,p:1}),lt=0,jr=1,dt=2,ut=3,ft=new WeakMap,Pr=(e,t)=>!e||!t||e.length!==t.length||t.some((r,s)=>r!==e[s]),cn=void 0,Gt=[],ln=e=>{var i;const t=()=>typeof e=="function"?e():e,r=Ue.at(-1);if(!r)return[t(),()=>{}];const[,s]=r,n=(i=s[_][1])[lt]||(i[lt]=[]),a=s[_][0]++;return n[a]||(n[a]=[t(),o=>{const c=cn,d=n[a];if(typeof o=="function"&&(o=o(d[0])),!Object.is(o,d[0]))if(d[0]=o,Gt.length){const[f,h]=Gt.at(-1);Promise.all([f===3?s:Je([f,!1,c],s),h]).then(([m])=>{if(!m||!(f===2||f===3))return;const E=m.vC;requestAnimationFrame(()=>{setTimeout(()=>{E===m.vC&&Je([f===3?1:0,!1,c],m)})})})}else Je([0,!1,c],s)}])},At=(e,t)=>{var o;const r=Ue.at(-1);if(!r)return e;const[,s]=r,n=(o=s[_][1])[dt]||(o[dt]=[]),a=s[_][0]++,i=n[a];return Pr(i==null?void 0:i[1],t)?n[a]=[e,t]:e=n[a][0],e},dn=e=>{const t=ft.get(e);if(t){if(t.length===2)throw t[1];return t[0]}throw e.then(r=>ft.set(e,[r]),r=>ft.set(e,[void 0,r])),e},un=(e,t)=>{var o;const r=Ue.at(-1);if(!r)return e();const[,s]=r,n=(o=s[_][1])[ut]||(o[ut]=[]),a=s[_][0]++,i=n[a];return Pr(i==null?void 0:i[1],t)&&(n[a]=[e(),t]),n[a][0]},fn=cr({pending:!1,data:null,method:null,action:null}),qt=new Set,hn=e=>{qt.add(e),e.finally(()=>qt.delete(e))},bt=(e,t)=>un(()=>r=>{let s;e&&(typeof e=="function"?s=e(r)||(()=>{e(null)}):e&&"current"in e&&(e.current=r,s=()=>{e.current=null}));const n=t(r);return()=>{n==null||n(),s==null||s()}},[e]),fe=Object.create(null),Xe=Object.create(null),Be=(e,t,r,s,n)=>{if(t!=null&&t.itemProp)return{tag:e,props:t,type:e,ref:t.ref};const a=document.head;let{onLoad:i,onError:o,precedence:c,blocking:d,...f}=t,h=null,m=!1;const E=Ge[e];let y;if(E.length>0){const R=a.querySelectorAll(e);e:for(const w of R)for(const A of Ge[e])if(w.getAttribute(A)===t[A]){h=w;break e}if(!h){const w=E.reduce((A,U)=>t[U]===void 0?A:`${A}-${U}-${t[U]}`,e);m=!Xe[w],h=Xe[w]||(Xe[w]=(()=>{const A=document.createElement(e);for(const U of E)t[U]!==void 0&&A.setAttribute(U,t[U]),t.rel&&A.setAttribute("rel",t.rel);return A})())}}else y=a.querySelectorAll(e);c=s?c??"":void 0,s&&(f[qe]=c);const p=At(R=>{if(E.length>0){let w=!1;for(const A of a.querySelectorAll(e)){if(w&&A.getAttribute(qe)!==c){a.insertBefore(R,A);return}A.getAttribute(qe)===c&&(w=!0)}a.appendChild(R)}else if(y){let w=!1;for(const A of y)if(A===R){w=!0;break}w||a.insertBefore(R,a.contains(y[0])?y[0]:a.querySelector(e)),y=void 0}},[c]),v=bt(t.ref,R=>{var U;const w=E[0];if(r===2&&(R.innerHTML=""),(m||y)&&p(R),!o&&!i)return;let A=fe[U=R.getAttribute(w)]||(fe[U]=new Promise((de,re)=>{R.addEventListener("load",de),R.addEventListener("error",re)}));i&&(A=A.then(i)),o&&(A=A.catch(o)),A.catch(()=>{})});if(n&&d==="render"){const R=Ge[e][0];if(t[R]){const w=t[R],A=fe[w]||(fe[w]=new Promise((U,de)=>{p(h),h.addEventListener("load",U),h.addEventListener("error",de)}));dn(A)}}const T={tag:e,type:e,props:{...f,ref:v},ref:v};return T.p=r,h&&(T.e=h),on(T,a)},mn=e=>{const t=en(),r=t&&Ae(t);return r!=null&&r.endsWith("svg")?{tag:"title",props:e,type:"title",ref:e.ref}:Be("title",e,void 0,!1,!1)},pn=e=>!e||["src","async"].some(t=>!e[t])?{tag:"script",props:e,type:"script",ref:e.ref}:Be("script",e,1,!1,!0),En=e=>!e||!["href","precedence"].every(t=>t in e)?{tag:"style",props:e,type:"style",ref:e.ref}:(e["data-href"]=e.href,delete e.href,Be("style",e,2,!0,!0)),gn=e=>!e||["onLoad","onError"].some(t=>t in e)||e.rel==="stylesheet"&&(!("precedence"in e)||"disabled"in e)?{tag:"link",props:e,type:"link",ref:e.ref}:Be("link",e,1,"precedence"in e,!0),vn=e=>Be("meta",e,void 0,!1,!1),kr=Symbol(),yn=e=>{const{action:t,...r}=e;typeof t!="function"&&(r.action=t);const[s,n]=ln([null,!1]),a=At(async d=>{const f=d.isTrusted?t:d.detail[kr];if(typeof f!="function")return;d.preventDefault();const h=new FormData(d.target);n([h,!0]);const m=f(h);m instanceof Promise&&(hn(m),await m),n([null,!0])},[]),i=bt(e.ref,d=>(d.addEventListener("submit",a),()=>{d.removeEventListener("submit",a)})),[o,c]=s;return s[1]=!1,{tag:fn,props:{value:{pending:o!==null,data:o,method:o?"post":null,action:o?t:null},children:{tag:"form",props:{...r,ref:i},type:"form",ref:i}},f:c}},$r=(e,{formAction:t,...r})=>{if(typeof t=="function"){const s=At(n=>{n.preventDefault(),n.currentTarget.form.dispatchEvent(new CustomEvent("submit",{detail:{[kr]:t}}))},[]);r.ref=bt(r.ref,n=>(n.addEventListener("click",s),()=>{n.removeEventListener("click",s)}))}return{tag:e,props:r,type:e,ref:r.ref}},xn=e=>$r("input",e),Tn=e=>$r("button",e);Object.assign(mt,{title:mn,script:pn,style:En,link:gn,meta:vn,form:yn,input:xn,button:Tn});xt(null);new TextEncoder;var Nn=xt(null),Rn=(e,t,r,s)=>(n,a)=>{const i="<!DOCTYPE html>",o=r?Ut(d=>r(d,e),{Layout:t,...a},n):n,c=qr`${j(i)}${Ut(Nn.Provider,{value:e},o)}`;return e.html(c)},An=(e,t)=>function(s,n){const a=s.getLayout()??as;return e&&s.setLayout(i=>e({...i,Layout:a},s)),s.setRenderer(Rn(s,a,e)),n()};const bn=An(({children:e})=>l("html",{lang:"es",children:[l("head",{children:[l("meta",{charset:"UTF-8"}),l("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0"}),l("title",{children:"Lyra Expenses - Sistema de Gastos y Viáticos"}),l("script",{src:"https://cdn.tailwindcss.com"}),l("link",{href:"https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css",rel:"stylesheet"}),l("link",{href:"/static/styles.css",rel:"stylesheet"}),l("script",{src:"https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.js"}),l("script",{src:"https://cdn.jsdelivr.net/npm/axios@1.6.0/dist/axios.min.js"}),l("script",{src:"https://cdn.jsdelivr.net/npm/dayjs@1.11.10/dayjs.min.js"}),l("meta",{name:"description",content:"Sistema ejecutivo de gestión de gastos y viáticos multiempresa con soporte multimoneda. Basado en el modelo 4-D: Dinero, Decisión, Dirección, Disciplina."}),l("meta",{name:"author",content:"Lyra - Asistente Estratégico"}),l("link",{rel:"icon",type:"image/x-icon",href:"data:image/x-icon;base64,AAABAAEAEBAAAAAAAABoBQAAFgAAACgAAAAQAAAAIAAAAAEACAAAAAAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAAAA"})]}),l("body",{className:"bg-gray-100",children:[e,l("script",{src:"/static/app.js"})]})]})),M=new Lr;M.use("*",Bs());M.use("/api/*",Ds());M.use(bn);M.use("/static/*",Js({root:"./public"}));M.get("/api/health",async e=>{const{env:t}=e;try{const r=await t.DB.prepare("SELECT 1 as test").first();return e.json({status:"healthy",database:"connected",environment:t.ENVIRONMENT||"development",timestamp:new Date().toISOString()})}catch(r){return e.json({status:"unhealthy",database:"disconnected",error:r.message},500)}});M.post("/api/init-db",async e=>{const{env:t}=e;if(t.ENVIRONMENT==="production")return e.json({error:"Not available in production"},403);try{const r=[`CREATE TABLE IF NOT EXISTS companies (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        name TEXT NOT NULL,
        country TEXT NOT NULL CHECK (country IN ('MX', 'ES')), 
        logo_url TEXT,
        primary_currency TEXT NOT NULL DEFAULT 'MXN' CHECK (primary_currency IN ('MXN', 'EUR', 'USD')),
        tax_id TEXT,
        address TEXT,
        active BOOLEAN NOT NULL DEFAULT TRUE,
        created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
        updated_at DATETIME DEFAULT CURRENT_TIMESTAMP
      )`,`CREATE TABLE IF NOT EXISTS users (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        email TEXT UNIQUE NOT NULL,
        name TEXT NOT NULL,
        password_hash TEXT NOT NULL,
        role TEXT NOT NULL DEFAULT 'editor' CHECK (role IN ('viewer', 'editor', 'advanced', 'admin')),
        active BOOLEAN NOT NULL DEFAULT TRUE,
        created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
        updated_at DATETIME DEFAULT CURRENT_TIMESTAMP,
        last_login DATETIME
      )`,`CREATE TABLE IF NOT EXISTS user_companies (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        user_id INTEGER NOT NULL,
        company_id INTEGER NOT NULL,
        can_view BOOLEAN NOT NULL DEFAULT TRUE,
        can_edit BOOLEAN NOT NULL DEFAULT FALSE,
        can_admin BOOLEAN NOT NULL DEFAULT FALSE,
        created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
        UNIQUE(user_id, company_id)
      )`,`CREATE TABLE IF NOT EXISTS expense_types (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        name TEXT NOT NULL,
        description TEXT,
        category TEXT NOT NULL DEFAULT 'general' CHECK (category IN ('travel', 'meals', 'transport', 'accommodation', 'supplies', 'services', 'general')),
        active BOOLEAN NOT NULL DEFAULT TRUE,
        created_at DATETIME DEFAULT CURRENT_TIMESTAMP
      )`,`CREATE TABLE IF NOT EXISTS expenses (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        company_id INTEGER NOT NULL,
        user_id INTEGER NOT NULL,
        expense_type_id INTEGER NOT NULL,
        description TEXT NOT NULL,
        expense_date DATE NOT NULL,
        amount DECIMAL(12,2) NOT NULL,
        currency TEXT NOT NULL CHECK (currency IN ('MXN', 'EUR', 'USD')),
        exchange_rate DECIMAL(10,6) NOT NULL DEFAULT 1.0,
        amount_mxn DECIMAL(12,2) NOT NULL,
        payment_method TEXT CHECK (payment_method IN ('cash', 'credit_card', 'debit_card', 'bank_transfer', 'company_card', 'petty_cash')),
        vendor TEXT,
        invoice_number TEXT,
        status TEXT NOT NULL DEFAULT 'pending' CHECK (status IN ('pending', 'approved', 'rejected', 'reimbursed', 'invoiced')),
        approved_by INTEGER,
        approved_at DATETIME,
        notes TEXT,
        tags TEXT,
        is_billable BOOLEAN NOT NULL DEFAULT FALSE,
        created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
        updated_at DATETIME DEFAULT CURRENT_TIMESTAMP,
        created_by INTEGER NOT NULL,
        updated_by INTEGER
      )`,`CREATE TABLE IF NOT EXISTS attachments (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        expense_id INTEGER NOT NULL,
        file_name TEXT NOT NULL,
        file_type TEXT NOT NULL CHECK (file_type IN ('image', 'pdf', 'xml')),
        file_url TEXT NOT NULL,
        file_size INTEGER,
        mime_type TEXT,
        ocr_text TEXT,
        ocr_confidence DECIMAL(3,2),
        is_cfdi_valid BOOLEAN,
        cfdi_uuid TEXT,
        uploaded_at DATETIME DEFAULT CURRENT_TIMESTAMP,
        uploaded_by INTEGER NOT NULL
      )`,`CREATE TABLE IF NOT EXISTS exchange_rates (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        from_currency TEXT NOT NULL CHECK (from_currency IN ('MXN', 'EUR', 'USD')),
        to_currency TEXT NOT NULL CHECK (to_currency IN ('MXN', 'EUR', 'USD')),
        rate DECIMAL(10,6) NOT NULL,
        rate_date DATE NOT NULL,
        source TEXT NOT NULL DEFAULT 'banxico',
        created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
        UNIQUE(from_currency, to_currency, rate_date)
      )`];for(const s of r)await t.DB.prepare(s).run();return await t.DB.prepare(`
      INSERT OR IGNORE INTO companies (id, name, country, primary_currency, tax_id, active) VALUES 
        (1, 'TechMX Solutions', 'MX', 'MXN', 'TMX123456789', TRUE),
        (2, 'Innovación Digital MX', 'MX', 'MXN', 'IDM987654321', TRUE),
        (3, 'Consultoría Estratégica MX', 'MX', 'MXN', 'CEM555666777', TRUE),
        (4, 'TechES Barcelona', 'ES', 'EUR', 'B-12345678', TRUE),
        (5, 'Innovación Madrid SL', 'ES', 'EUR', 'B-87654321', TRUE),
        (6, 'Digital Valencia S.A.', 'ES', 'EUR', 'A-11223344', TRUE)
    `).run(),await t.DB.prepare(`
      INSERT OR IGNORE INTO expense_types (id, name, description, category, active) VALUES 
        (1, 'Comidas de Trabajo', 'Gastos en restaurantes por reuniones de trabajo', 'meals', TRUE),
        (2, 'Transporte Terrestre', 'Taxis, Uber, autobuses, metro', 'transport', TRUE),
        (3, 'Combustible', 'Gasolina y gastos de vehículos', 'transport', TRUE),
        (4, 'Hospedaje', 'Hoteles y alojamientos', 'accommodation', TRUE),
        (5, 'Vuelos', 'Boletos de avión nacionales e internacionales', 'travel', TRUE),
        (6, 'Material de Oficina', 'Papelería, suministros de oficina', 'supplies', TRUE),
        (7, 'Software y Licencias', 'Suscripciones y licencias de software', 'services', TRUE),
        (8, 'Capacitación', 'Cursos, conferencias, workshops', 'services', TRUE),
        (9, 'Marketing', 'Publicidad, eventos, promociones', 'services', TRUE),
        (10, 'Otros Gastos', 'Gastos diversos no categorizados', 'general', TRUE)
    `).run(),await t.DB.prepare(`
      INSERT OR IGNORE INTO users (id, email, name, password_hash, role, active) VALUES 
        (1, 'admin@techmx.com', 'Alejandro Rodríguez', '$2b$10$example_hash_admin', 'admin', TRUE),
        (2, 'maria.lopez@techmx.com', 'María López', '$2b$10$example_hash_user1', 'editor', TRUE),
        (3, 'carlos.martinez@innovacion.mx', 'Carlos Martínez', '$2b$10$example_hash_user2', 'advanced', TRUE),
        (4, 'ana.garcia@consultoria.mx', 'Ana García', '$2b$10$example_hash_user3', 'editor', TRUE),
        (5, 'pedro.sanchez@techespana.es', 'Pedro Sánchez', '$2b$10$example_hash_user4', 'advanced', TRUE),
        (6, 'elena.torres@madrid.es', 'Elena Torres', '$2b$10$example_hash_user5', 'editor', TRUE)
    `).run(),await t.DB.prepare(`
      INSERT OR IGNORE INTO user_companies (user_id, company_id, can_view, can_edit, can_admin) VALUES 
        (1, 1, TRUE, TRUE, TRUE), (1, 2, TRUE, TRUE, TRUE), (1, 3, TRUE, TRUE, TRUE),
        (1, 4, TRUE, TRUE, TRUE), (1, 5, TRUE, TRUE, TRUE), (1, 6, TRUE, TRUE, TRUE),
        (2, 1, TRUE, TRUE, FALSE), (3, 2, TRUE, TRUE, FALSE), (4, 3, TRUE, TRUE, FALSE),
        (5, 4, TRUE, TRUE, FALSE), (6, 5, TRUE, TRUE, FALSE)
    `).run(),await t.DB.prepare(`
      INSERT OR IGNORE INTO exchange_rates (from_currency, to_currency, rate, rate_date, source) VALUES 
        ('USD', 'MXN', 18.25, '2024-09-24', 'banxico'),
        ('EUR', 'MXN', 20.15, '2024-09-24', 'banxico'),
        ('EUR', 'USD', 1.10, '2024-09-24', 'ecb'),
        ('USD', 'EUR', 0.91, '2024-09-24', 'ecb'),
        ('MXN', 'USD', 0.055, '2024-09-24', 'banxico'),
        ('MXN', 'EUR', 0.050, '2024-09-24', 'banxico')
    `).run(),await t.DB.prepare(`
      INSERT OR IGNORE INTO expenses (
        id, company_id, user_id, expense_type_id, description, expense_date, 
        amount, currency, exchange_rate, amount_mxn, payment_method, vendor, 
        status, notes, is_billable, created_by
      ) VALUES 
        (1, 1, 2, 1, 'Comida con cliente - Proyecto Alpha', '2024-09-20', 850.00, 'MXN', 1.0, 850.00, 'company_card', 'Restaurante Pujol', 'approved', 'Reunión de cierre de proyecto', TRUE, 2),
        (2, 1, 2, 2, 'Taxi al aeropuerto', '2024-09-21', 320.50, 'MXN', 1.0, 320.50, 'cash', 'Uber', 'pending', NULL, FALSE, 2),
        (3, 2, 3, 7, 'Licencia Adobe Creative Suite', '2024-09-22', 2500.00, 'MXN', 1.0, 2500.00, 'credit_card', 'Adobe Inc', 'approved', 'Renovación anual', FALSE, 3),
        (4, 4, 5, 5, 'Vuelo Barcelona-Madrid', '2024-09-18', 120.00, 'EUR', 20.15, 2418.00, 'company_card', 'Iberia', 'reimbursed', 'Reunión con cliente en Madrid', TRUE, 5),
        (5, 5, 6, 4, 'Hotel NH Collection Madrid', '2024-09-19', 180.00, 'EUR', 20.15, 3627.00, 'credit_card', 'NH Hotels', 'approved', 'Estadía 2 noches', TRUE, 6),
        (6, 1, 1, 8, 'Conferencia AWS Re:Invent', '2024-09-15', 1500.00, 'USD', 18.25, 27375.00, 'company_card', 'Amazon Web Services', 'approved', 'Capacitación en cloud computing', FALSE, 1),
        (7, 3, 4, 6, 'Material de oficina importado', '2024-09-23', 250.00, 'USD', 18.25, 4562.50, 'bank_transfer', 'Office Depot USA', 'pending', 'Material especializado', FALSE, 4)
    `).run(),e.json({success:!0,message:"Base de datos inicializada con datos de prueba",timestamp:new Date().toISOString()})}catch(r){return e.json({error:"Failed to initialize database",details:r.message},500)}});M.get("/api/companies",async e=>{const{env:t}=e;try{const r=await t.DB.prepare(`
      SELECT id, name, country, primary_currency, logo_url, active, created_at
      FROM companies 
      WHERE active = TRUE
      ORDER BY country, name
    `).all();return e.json({companies:r.results})}catch{return e.json({error:"Failed to fetch companies"},500)}});M.get("/api/users",async e=>{const{env:t}=e;try{const r=await t.DB.prepare(`
      SELECT u.id, u.email, u.name, u.role, u.active, u.created_at,
             GROUP_CONCAT(c.name, '|') as companies
      FROM users u
      LEFT JOIN user_companies uc ON u.id = uc.user_id
      LEFT JOIN companies c ON uc.company_id = c.id
      WHERE u.active = TRUE
      GROUP BY u.id
      ORDER BY u.name
    `).all();return e.json({users:r.results})}catch{return e.json({error:"Failed to fetch users"},500)}});M.get("/api/expenses",async e=>{const{env:t}=e,r=e.req.query();let s=`
    SELECT e.*, c.name as company_name, u.name as user_name, et.name as expense_type_name,
           c.country, c.primary_currency as company_currency
    FROM expenses e
    JOIN companies c ON e.company_id = c.id
    JOIN users u ON e.user_id = u.id
    JOIN expense_types et ON e.expense_type_id = et.id
    WHERE 1=1
  `;const n=[];r.company_id&&(s+=" AND e.company_id = ?",n.push(r.company_id)),r.user_id&&(s+=" AND e.user_id = ?",n.push(r.user_id)),r.status&&(s+=" AND e.status = ?",n.push(r.status)),r.currency&&(s+=" AND e.currency = ?",n.push(r.currency)),r.date_from&&(s+=" AND e.expense_date >= ?",n.push(r.date_from)),r.date_to&&(s+=" AND e.expense_date <= ?",n.push(r.date_to)),s+=" ORDER BY e.expense_date DESC, e.created_at DESC",r.limit&&(s+=" LIMIT ?",n.push(parseInt(r.limit)||50));try{const i=await t.DB.prepare(s).bind(...n).all();return e.json({expenses:i.results,total:i.results.length})}catch{return e.json({error:"Failed to fetch expenses"},500)}});M.post("/api/expenses",async e=>{const{env:t}=e;try{const r=await e.req.json(),s=["company_id","expense_type_id","description","expense_date","amount","currency"];for(const o of s)if(!r[o])return e.json({error:`Missing required field: ${o}`},400);let n=r.amount,a=1;r.currency==="USD"?(a=18.25,n=r.amount*a):r.currency==="EUR"&&(a=20.15,n=r.amount*a);const i=await t.DB.prepare(`
      INSERT INTO expenses (
        company_id, user_id, expense_type_id, description, expense_date, 
        amount, currency, exchange_rate, amount_mxn, payment_method, 
        vendor, notes, status, created_by
      ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
    `).bind(r.company_id,r.user_id||1,r.expense_type_id,r.description,r.expense_date,r.amount,r.currency,a,n,r.payment_method||"cash",r.vendor||"",r.notes||"","pending",r.user_id||1).run();return e.json({success:!0,expense_id:i.meta.last_row_id,message:"Gasto creado exitosamente"})}catch(r){return e.json({error:"Failed to create expense",details:r.message},500)}});M.get("/api/dashboard/metrics",async e=>{const{env:t}=e;e.req.query();try{const r=await t.DB.prepare(`
      SELECT status, COUNT(*) as count, SUM(amount_mxn) as total_mxn
      FROM expenses
      GROUP BY status
    `).all(),s=await t.DB.prepare(`
      SELECT c.name as company, c.country, COUNT(*) as count, SUM(e.amount_mxn) as total_mxn
      FROM expenses e
      JOIN companies c ON e.company_id = c.id
      GROUP BY c.id, c.name, c.country
      ORDER BY total_mxn DESC
    `).all(),n=await t.DB.prepare(`
      SELECT currency, COUNT(*) as count, SUM(amount) as total_original, SUM(amount_mxn) as total_mxn
      FROM expenses
      GROUP BY currency
    `).all(),a=await t.DB.prepare(`
      SELECT e.*, c.name as company_name, u.name as user_name
      FROM expenses e
      JOIN companies c ON e.company_id = c.id
      JOIN users u ON e.user_id = u.id
      ORDER BY e.created_at DESC
      LIMIT 10
    `).all();return e.json({status_metrics:r.results,company_metrics:s.results,currency_metrics:n.results,recent_expenses:a.results})}catch{return e.json({error:"Failed to fetch dashboard metrics"},500)}});M.get("/api/expense-types",async e=>{const{env:t}=e;try{const r=await t.DB.prepare(`
      SELECT id, name, description, category, active
      FROM expense_types
      WHERE active = TRUE
      ORDER BY category, name
    `).all();return e.json({expense_types:r.results})}catch{return e.json({error:"Failed to fetch expense types"},500)}});M.get("/",e=>e.render(l("div",{className:"min-h-screen bg-gray-100",children:[l("div",{className:"bg-white shadow-sm border-b",children:l("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:l("div",{className:"flex justify-between items-center py-6",children:[l("div",{className:"flex items-center space-x-4",children:[l("i",{className:"fas fa-calculator text-blue-600 text-2xl"}),l("h1",{className:"text-2xl font-bold text-gray-900",children:"Lyra Expenses"}),l("span",{className:"bg-blue-100 text-blue-800 text-xs px-2.5 py-0.5 rounded-full",children:"Sistema 4-D"})]}),l("div",{className:"flex items-center space-x-4",children:l("button",{className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:[l("i",{className:"fas fa-plus mr-2"}),"Nuevo Gasto"]})})]})})}),l("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:l("div",{id:"app",children:[l("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[l("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:l("div",{className:"flex items-center",children:[l("div",{className:"flex-shrink-0",children:l("i",{className:"fas fa-money-bill-wave text-green-500 text-2xl"})}),l("div",{className:"ml-4",children:[l("p",{className:"text-sm font-medium text-gray-500",children:"Total Gastos"}),l("p",{className:"text-2xl font-semibold text-gray-900",id:"total-expenses",children:"$0"})]})]})}),l("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:l("div",{className:"flex items-center",children:[l("div",{className:"flex-shrink-0",children:l("i",{className:"fas fa-clock text-yellow-500 text-2xl"})}),l("div",{className:"ml-4",children:[l("p",{className:"text-sm font-medium text-gray-500",children:"Pendientes"}),l("p",{className:"text-2xl font-semibold text-gray-900",id:"pending-expenses",children:"0"})]})]})}),l("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:l("div",{className:"flex items-center",children:[l("div",{className:"flex-shrink-0",children:l("i",{className:"fas fa-building text-blue-500 text-2xl"})}),l("div",{className:"ml-4",children:[l("p",{className:"text-sm font-medium text-gray-500",children:"Empresas"}),l("p",{className:"text-2xl font-semibold text-gray-900",id:"companies-count",children:"0"})]})]})}),l("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:l("div",{className:"flex items-center",children:[l("div",{className:"flex-shrink-0",children:l("i",{className:"fas fa-users text-purple-500 text-2xl"})}),l("div",{className:"ml-4",children:[l("p",{className:"text-sm font-medium text-gray-500",children:"Usuarios"}),l("p",{className:"text-2xl font-semibold text-gray-900",id:"users-count",children:"0"})]})]})})]}),l("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8",children:[l("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[l("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:[l("i",{className:"fas fa-chart-pie mr-2"}),"Gastos por Empresa"]}),l("div",{id:"company-chart",className:"h-64"})]}),l("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[l("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:[l("i",{className:"fas fa-coins mr-2"}),"Gastos por Moneda"]}),l("div",{id:"currency-chart",className:"h-64"})]})]}),l("div",{className:"bg-white rounded-lg shadow-sm border",children:[l("div",{className:"px-6 py-4 border-b",children:l("h3",{className:"text-lg font-semibold text-gray-900",children:[l("i",{className:"fas fa-receipt mr-2"}),"Gastos Recientes"]})}),l("div",{className:"overflow-x-auto",children:l("table",{className:"min-w-full divide-y divide-gray-200",children:[l("thead",{className:"bg-gray-50",children:l("tr",{children:[l("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Descripción"}),l("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Empresa"}),l("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Usuario"}),l("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Monto"}),l("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"}),l("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fecha"})]})}),l("tbody",{id:"recent-expenses-table",className:"bg-white divide-y divide-gray-200",children:l("tr",{children:l("td",{colspan:"6",className:"px-6 py-4 text-center text-gray-500",children:"Cargando..."})})})]})})]})]})})]})));M.get("/expenses",e=>e.render(l("div",{className:"min-h-screen bg-gray-100",children:[l("div",{className:"bg-white shadow-sm border-b",children:l("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:l("div",{className:"flex justify-between items-center py-6",children:[l("div",{className:"flex items-center space-x-4",children:[l("a",{href:"/",className:"text-blue-600 hover:text-blue-700",children:l("i",{className:"fas fa-arrow-left"})}),l("h1",{className:"text-2xl font-bold text-gray-900",children:"Gestión de Gastos"})]}),l("div",{className:"flex items-center space-x-4",children:l("button",{className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700",onclick:"showExpenseForm()",children:[l("i",{className:"fas fa-plus mr-2"}),"Registrar Gasto"]})})]})})}),l("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[l("div",{className:"bg-white p-6 rounded-lg shadow-sm border mb-6",children:[l("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Filtros"}),l("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[l("div",{children:[l("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Empresa"}),l("select",{id:"filter-company",className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:l("option",{value:"",children:"Todas las empresas"})})]}),l("div",{children:[l("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Estado"}),l("select",{id:"filter-status",className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[l("option",{value:"",children:"Todos los estados"}),l("option",{value:"pending",children:"Pendiente"}),l("option",{value:"approved",children:"Aprobado"}),l("option",{value:"rejected",children:"Rechazado"}),l("option",{value:"reimbursed",children:"Reembolsado"}),l("option",{value:"invoiced",children:"Facturado"})]})]}),l("div",{children:[l("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Moneda"}),l("select",{id:"filter-currency",className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[l("option",{value:"",children:"Todas las monedas"}),l("option",{value:"MXN",children:"MXN"}),l("option",{value:"USD",children:"USD"}),l("option",{value:"EUR",children:"EUR"})]})]}),l("div",{children:[l("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Periodo"}),l("select",{id:"filter-period",className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[l("option",{value:"",children:"Todo el periodo"}),l("option",{value:"today",children:"Hoy"}),l("option",{value:"week",children:"Esta semana"}),l("option",{value:"month",children:"Este mes"}),l("option",{value:"quarter",children:"Este trimestre"}),l("option",{value:"year",children:"Este año"})]})]})]}),l("div",{className:"flex space-x-4 mt-4",children:[l("button",{onclick:"applyFilters()",className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:[l("i",{className:"fas fa-search mr-2"}),"Aplicar Filtros"]}),l("button",{onclick:"clearFilters()",className:"bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700",children:[l("i",{className:"fas fa-times mr-2"}),"Limpiar"]})]})]}),l("div",{className:"bg-white rounded-lg shadow-sm border",children:[l("div",{className:"px-6 py-4 border-b",children:l("div",{className:"flex justify-between items-center",children:[l("h3",{className:"text-lg font-semibold text-gray-900",children:"Lista de Gastos"}),l("div",{className:"flex space-x-2",children:[l("button",{className:"bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700",children:[l("i",{className:"fas fa-file-pdf mr-1"}),"PDF"]}),l("button",{className:"bg-green-600 text-white px-3 py-1 rounded text-sm hover:bg-green-700",children:[l("i",{className:"fas fa-file-excel mr-1"}),"Excel"]})]})]})}),l("div",{className:"overflow-x-auto",children:l("table",{className:"min-w-full divide-y divide-gray-200",children:[l("thead",{className:"bg-gray-50",children:l("tr",{children:[l("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ID"}),l("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Descripción"}),l("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Empresa"}),l("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Usuario"}),l("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Monto Original"}),l("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Monto MXN"}),l("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"}),l("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fecha"}),l("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),l("tbody",{id:"expenses-table",className:"bg-white divide-y divide-gray-200",children:l("tr",{children:l("td",{colspan:"9",className:"px-6 py-4 text-center text-gray-500",children:"Cargando gastos..."})})})]})})]})]})]})));const zt=new Lr,wn=Object.assign({"/src/index.tsx":M});let Fr=!1;for(const[,e]of Object.entries(wn))e&&(zt.all("*",t=>{let r;try{r=t.executionCtx}catch{}return e.fetch(t.req.raw,t.env,r)}),zt.notFound(t=>{let r;try{r=t.executionCtx}catch{}return e.fetch(t.req.raw,t.env,r)}),Fr=!0);if(!Fr)throw new Error("Can't import modules from ['/src/index.ts','/src/index.tsx','/app/server.ts']");export{zt as default};
